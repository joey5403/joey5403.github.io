<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hexagonal architecture pattern | 黄庄以北</title>
<meta name=keywords content="architect"><meta name=description content="Intent The hexagonal architecture pattern, which is also known as the ports and adapters pattern, was proposed by Dr. Alistair Cockburn in 2005. It aims to create loosely coupled architectures where application components can be tested independently, with no dependencies on data stores or user interfaces (UIs). This pattern helps prevent technology lock-in of data stores and UIs. This makes it easier to change the technology stack over time, with limited or no impact to business logic."><meta name=author content="Joey"><link rel=canonical href=https://joeyzheng.tech/posts/hexagonal-architecture-pattern/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://joeyzheng.tech/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://joeyzheng.tech/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://joeyzheng.tech/favicon-32x32.png><link rel=apple-touch-icon href=https://joeyzheng.tech/apple-touch-icon.png><link rel=mask-icon href=https://joeyzheng.tech/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://joeyzheng.tech/posts/hexagonal-architecture-pattern/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://joeyzheng.tech/posts/hexagonal-architecture-pattern/"><meta property="og:site_name" content="黄庄以北"><meta property="og:title" content="Hexagonal architecture pattern"><meta property="og:description" content="Intent The hexagonal architecture pattern, which is also known as the ports and adapters pattern, was proposed by Dr. Alistair Cockburn in 2005. It aims to create loosely coupled architectures where application components can be tested independently, with no dependencies on data stores or user interfaces (UIs). This pattern helps prevent technology lock-in of data stores and UIs. This makes it easier to change the technology stack over time, with limited or no impact to business logic."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-20T00:00:00+00:00"><meta property="article:modified_time" content="2024-10-20T00:00:00+00:00"><meta property="article:tag" content="Architect"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hexagonal architecture pattern"><meta name=twitter:description content="Intent The hexagonal architecture pattern, which is also known as the ports and adapters pattern, was proposed by Dr. Alistair Cockburn in 2005. It aims to create loosely coupled architectures where application components can be tested independently, with no dependencies on data stores or user interfaces (UIs). This pattern helps prevent technology lock-in of data stores and UIs. This makes it easier to change the technology stack over time, with limited or no impact to business logic."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://joeyzheng.tech/posts/"},{"@type":"ListItem","position":2,"name":"Hexagonal architecture pattern","item":"https://joeyzheng.tech/posts/hexagonal-architecture-pattern/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hexagonal architecture pattern","name":"Hexagonal architecture pattern","description":"Intent The hexagonal architecture pattern, which is also known as the ports and adapters pattern, was proposed by Dr. Alistair Cockburn in 2005. It aims to create loosely coupled architectures where application components can be tested independently, with no dependencies on data stores or user interfaces (UIs). This pattern helps prevent technology lock-in of data stores and UIs. This makes it easier to change the technology stack over time, with limited or no impact to business logic.","keywords":["architect"],"articleBody":"Intent The hexagonal architecture pattern, which is also known as the ports and adapters pattern, was proposed by Dr. Alistair Cockburn in 2005. It aims to create loosely coupled architectures where application components can be tested independently, with no dependencies on data stores or user interfaces (UIs). This pattern helps prevent technology lock-in of data stores and UIs. This makes it easier to change the technology stack over time, with limited or no impact to business logic. In this loosely coupled architecture, the application communicates with external components over interfaces called ports, and uses adapters to translate the technical exchanges with these components.\nMotivation The hexagonal architecture pattern is used to isolate business logic (domain logic) from related infrastructure code, such as code to access a database or external APIs. This pattern is useful for creating loosely coupled business logic and infrastructure code for AWS Lambda functions that require integration with external services. In traditional architectures, a common practice is to embed business logic in the database layer as stored procedures and in the user interface. This practice, along with using UI-specific constructs within business logic, leads to closely coupled architectures that cause bottlenecks in database migrations and user experience (UX) modernization efforts. The hexagonal architecture pattern enables you to design your systems and applications by purpose rather than by technology. This strategy results in easily exchangeable application components such as databases, UX, and service components.\nApplicability Use the hexagonal architecture pattern when:\nYou want to decouple your application architecture to create components that can be fully tested.\nMultiple types of clients can use the same domain logic.\nYour UI and database components require periodical technology refreshes that don’t affect application logic.\nYour application requires multiple input providers and output consumers, and customizing the application logic leads to code complexity and lack of extensibility.\nIssues and considerations Domain-driven design: Hexagonal architecture works especially well with domain-driven design (DDD). Each application component represents a sub-domain in DDD, and hexagonal architectures can be used to achieve loose coupling among application components.\nTestability: By design, a hexagonal architecture uses abstractions for inputs and outputs. Therefore, writing unit tests and testing in isolation become easier because of the inherent loose coupling.\nComplexity: The complexity of separating business logic from infrastructure code, when handled carefully, can bring great benefits such as agility, test coverage, and technology adaptability. Otherwise, issues can become complex to solve.\nMaintenance overhead: The additional adapter code that makes the architecture pluggable is justified only if the application component requires several input sources and output destinations to write to, or when the inputs and output data store has to change over time. Otherwise, the adapter becomes another additional layer to maintain, which introduces maintenance overhead.\nLatency issues: Using ports and adapters adds another layer, which might result in latency.\nImplementation Hexagonal architectures support the isolation of application and business logic from infrastructure code and from code that integrates the application with UIs, external APIs, databases, and message brokers. You can easily connect business logic components to other components (such as databases) in the application architecture through ports and adapters.\nPorts are technology-agnostic entry points into an application component. These custom interfaces determine the interface that allows external actors to communicate with the application component, regardless of who or what implements the interface. This is similar to how a USB port allows many different types of devices to communicate with a computer, as long as they use a USB adapter.\nAdapters interact with the application through a port by using a specific technology. Adapters plug into these ports, receive data from or provide data to the ports, and transform the data for further processing. For example, a REST adapter enables actors to communicate with the application component through a REST API. A port can have multiple adapters without any risk to the port or to the application component. To extend the previous example, adding a GraphQL adapter to the same port provides an additional means for actors to interact with the application through a GraphQL API without affecting the REST API, the port, or the application.\nPorts connect to the application, and adapters serve as a connection to the outside world. You can use ports to create loosely coupled application components, and exchange dependent components by changing the adapter. This enables the application component to interact with external input and outputs without needing to have any contextual awareness. Components are exchangeable at any level, which facilitates automated testing. You can test components independently without any dependencies on the infrastructure code instead of provisioning an entire environment to conduct testing. The application logic doesn’t depend on external factors, so testing is simplified and it becomes easier to mock dependencies.\nFor example, in a loosely coupled architecture, an application component should be able to read and write data without knowing the details of the data store. The responsibility of the application component is to supply data to an interface (port). An adapter defines the logic of writing to a data store, which can be a database, a file system, or an object storage system such as Amazon S3, depending on the application’s needs.\nHigh-level architecture The application or application component contains the core business logic. It receives commands or queries from the ports, and sends requests out through the ports to external actors, which are implemented through adapters, as illustrated in the following diagram.\nImplementation using AWS services AWS Lambda functions often contain both business logic and database integration code, which are tightly coupled to meet an objective. You can use the hexagonal architecture pattern to separate business logic from infrastructure code. This separation enables unit testing of the business logic without any dependencies on the database code, and improves the agility of the development process.\nIn the following architecture, a Lambda function implements the hexagonal architecture pattern. The Lambda function is initiated by the Amazon API Gateway REST API. The function implements business logic and writes data to DynamoDB tables.\nSample code The sample code in this section shows how to implement the domain model by using Lambda, separate it from infrastructure code (such as the code to access DynamoDB), and implement unit testing for the function.\nDomain model The domain model class has no knowledge of external components or dependencies—it only implements the business logic. In the following example, the class Recipient is a domain model class that checks for overlaps in the reservation date.\nclass Recipient: def __init__(self, recipient_id:str, email:str, first_name:str, last_name:str, age:int): self.__recipient_id = recipient_id self.__email = email self.__first_name = first_name self.__last_name = last_name self.__age = age self.__slots = [] @property def recipient_id(self): return self.__recipient_id #..... def are_slots_same_date(self, slot:Slot) -\u003e bool: for selfslot in self.__slots: if selfslot.reservation_date == slot.reservation_date: return True return False def is_slot_counts_equal_or_over_two(self) -\u003e bool: #..... Input port The RecipientInputPort class connects to the recipient class and runs the domain logic.\nclass RecipientInputPort(IRecipientInputPort): def __init__(self, recipient_output_port: IRecipientOutputPort, slot_output_port: ISlotOutputPort): self.__recipient_output_port = recipient_output_port self.__slot_output_port = slot_output_port ''' make reservation: adapting domain model business logic ''' def make_reservation(self, recipient_id:str, slot_id:str) -\u003e Status: status = None # --------------------------------------------------- # get an instance from output port # --------------------------------------------------- recipient = self.__recipient_output_port.get_recipient_by_id(recipient_id) slot = self.__slot_output_port.get_slot_by_id(slot_id) if recipient == None or slot == None: return Status(400, \"Request instance is not found. Something wrong!\") print(f\"recipient: {recipient.first_name}, slot date: {slot.reservation_date}\") # --------------------------------------------------- # execute domain logic # --------------------------------------------------- ret = recipient.add_reserve_slot(slot) # --------------------------------------------------- # persistent an instance throgh output port # --------------------------------------------------- if ret == True: ret = self.__recipient_output_port.add_reservation(recipient) if ret == True: status = Status(200, \"The recipient's reservation is added.\") else: status = Status(200, \"The recipient's reservation is NOT added!\") return status DynamoDB adapter class The DDBRecipientAdapter class implements access to the DynamoDB tables.\nclass DDBRecipientAdapter(IRecipientAdapter): def __init__(self): ddb = boto3.resource('dynamodb') self.__table = ddb.Table(table_name) def load(self, recipient_id:str) -\u003e Recipient: try: response = self.__table.get_item( Key={'pk': pk_prefix + recipient_id}) ... def save(self, recipient:Recipient) -\u003e bool: try: item = { \"pk\": pk_prefix + recipient.recipient_id, \"email\": recipient.email, \"first_name\": recipient.first_name, \"last_name\": recipient.last_name, \"age\": recipient.age, \"slots\": [] } # ... The Lambda function get_recipient_input_port is a factory for instances of the RecipientInputPort class. It constructs instances of output port classes with related adapter instances.\ndef get_recipient_input_port(): return RecipientInputPort( RecipientOutputPort(DDBRecipientAdapter()), SlotOutputPort(DDBSlotAdapter())) def lambda_handler(event, context): body = json.loads(event['body']) recipient_id = body['recipient_id'] slot_id = body['slot_id'] # get an input port instance recipient_input_port = get_recipient_input_port() status = recipient_input_port.make_reservation(recipient_id, slot_id) return { \"statusCode\": status.status_code, \"body\": json.dumps({ \"message\": status.message }), } Unit testing You can test the business logic for domain model classes by injecting mock classes. The following example provides the unit test for the domain model Recipent class.\ndef test_add_slot_one(fixture_recipient, fixture_slot): slot = fixture_slot target = fixture_recipient target.add_reserve_slot(slot) assert slot != None assert target != None assert 1 == len(target.slots) assert slot.slot_id == target.slots[0].slot_id assert slot.reservation_date == target.slots[0].reservation_date assert slot.location == target.slots[0].location assert False == target.slots[0].is_vacant def test_add_slot_two(fixture_recipient, fixture_slot, fixture_slot_2): #..... def test_cannot_append_slot_more_than_two(fixture_recipient, fixture_slot, fixture_slot_2, fixture_slot_3): #..... def test_cannot_append_same_date_slot(fixture_recipient, fixture_slot): #..... GitHub repository For a complete implementation of the sample architecture for this pattern, see the GitHub repository at https://github.com/aws-samples/aws-lambda-domain-model-sample .\nRelated content Hexagonal architecture , article by Alistair Cockburn\nDeveloping evolutionary architectures with AWS Lambda (AWS blog post in Japanese)\n","wordCount":"1515","inLanguage":"en","datePublished":"2024-10-20T00:00:00Z","dateModified":"2024-10-20T00:00:00Z","author":{"@type":"Person","name":"Joey"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://joeyzheng.tech/posts/hexagonal-architecture-pattern/"},"publisher":{"@type":"Organization","name":"黄庄以北","logo":{"@type":"ImageObject","url":"https://joeyzheng.tech/favicon.png"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://joeyzheng.tech/ accesskey=h title="黄庄以北 (Alt + H)">黄庄以北</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://joeyzheng.tech/categories/ title=categories><span>categories</span></a></li><li><a href=https://joeyzheng.tech/tags/ title=tags><span>tags</span></a></li><li><a href=https://joeyzheng.tech/ title=joeyzheng.tech><span>joeyzheng.tech</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://joeyzheng.tech/>Home</a>&nbsp;»&nbsp;<a href=https://joeyzheng.tech/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Hexagonal architecture pattern</h1><div class=post-meta><span title='2024-10-20 00:00:00 +0000 UTC'>October 20, 2024</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1515 words&nbsp;·&nbsp;Joey</div></header><div class=post-content><h2 id=intent>Intent<a hidden class=anchor aria-hidden=true href=#intent>#</a></h2><p>The hexagonal architecture pattern, which is also known as the ports and adapters pattern, was proposed by Dr. Alistair Cockburn in 2005. It aims to create loosely coupled architectures where application components can be tested independently, with no dependencies on data stores or user interfaces (UIs). This pattern helps prevent technology lock-in of data stores and UIs. This makes it easier to change the technology stack over time, with limited or no impact to business logic. In this loosely coupled architecture, the application communicates with external components over interfaces called <em>ports</em>, and uses <em>adapters</em> to translate the technical exchanges with these components.</p><h2 id=motivation>Motivation<a hidden class=anchor aria-hidden=true href=#motivation>#</a></h2><p>The hexagonal architecture pattern is used to isolate business logic (domain logic) from related infrastructure code, such as code to access a database or external APIs. This pattern is useful for creating loosely coupled business logic and infrastructure code for AWS Lambda functions that require integration with external services. In traditional architectures, a common practice is to embed business logic in the database layer as stored procedures and in the user interface. This practice, along with using UI-specific constructs within business logic, leads to closely coupled architectures that cause bottlenecks in database migrations and user experience (UX) modernization efforts. The hexagonal architecture pattern enables you to design your systems and applications by purpose rather than by technology. This strategy results in easily exchangeable application components such as databases, UX, and service components.</p><h2 id=applicability>Applicability<a hidden class=anchor aria-hidden=true href=#applicability>#</a></h2><p>Use the hexagonal architecture pattern when:</p><ul><li><p>You want to decouple your application architecture to create components that can be fully tested.</p></li><li><p>Multiple types of clients can use the same domain logic.</p></li><li><p>Your UI and database components require periodical technology refreshes that don&rsquo;t affect application logic.</p></li><li><p>Your application requires multiple input providers and output consumers, and customizing the application logic leads to code complexity and lack of extensibility.</p></li></ul><h2 id=issues-and-considerations>Issues and considerations<a hidden class=anchor aria-hidden=true href=#issues-and-considerations>#</a></h2><ul><li><p><strong>Domain-driven design</strong>: Hexagonal architecture works especially well with domain-driven design (DDD). Each application component represents a sub-domain in DDD, and hexagonal architectures can be used to achieve loose coupling among application components.</p></li><li><p><strong>Testability</strong>: By design, a hexagonal architecture uses abstractions for inputs and outputs. Therefore, writing unit tests and testing in isolation become easier because of the inherent loose coupling.</p></li><li><p><strong>Complexity</strong>: The complexity of separating business logic from infrastructure code, when handled carefully, can bring great benefits such as agility, test coverage, and technology adaptability. Otherwise, issues can become complex to solve.</p></li><li><p><strong>Maintenance overhead</strong>: The additional adapter code that makes the architecture pluggable is justified only if the application component requires several input sources and output destinations to write to, or when the inputs and output data store has to change over time. Otherwise, the adapter becomes another additional layer to maintain, which introduces maintenance overhead.</p></li><li><p><strong>Latency issues</strong>: Using ports and adapters adds another layer, which might result in latency.</p></li></ul><h2 id=implementation>Implementation<a hidden class=anchor aria-hidden=true href=#implementation>#</a></h2><p>Hexagonal architectures support the isolation of application and business logic from infrastructure code and from code that integrates the application with UIs, external APIs, databases, and message brokers. You can easily connect business logic components to other components (such as databases) in the application architecture through ports and adapters.</p><p>Ports are technology-agnostic entry points into an application component. These custom interfaces determine the interface that allows external actors to communicate with the application component, regardless of who or what implements the interface. This is similar to how a USB port allows many different types of devices to communicate with a computer, as long as they use a USB adapter.</p><p>Adapters interact with the application through a port by using a specific technology. Adapters plug into these ports, receive data from or provide data to the ports, and transform the data for further processing. For example, a REST adapter enables actors to communicate with the application component through a REST API. A port can have multiple adapters without any risk to the port or to the application component. To extend the previous example, adding a GraphQL adapter to the same port provides an additional means for actors to interact with the application through a GraphQL API without affecting the REST API, the port, or the application.</p><p>Ports connect to the application, and adapters serve as a connection to the outside world. You can use ports to create loosely coupled application components, and exchange dependent components by changing the adapter. This enables the application component to interact with external input and outputs without needing to have any contextual awareness. Components are exchangeable at any level, which facilitates automated testing. You can test components independently without any dependencies on the infrastructure code instead of provisioning an entire environment to conduct testing. The application logic doesn&rsquo;t depend on external factors, so testing is simplified and it becomes easier to mock dependencies.</p><p>For example, in a loosely coupled architecture, an application component should be able to read and write data without knowing the details of the data store. The responsibility of the application component is to supply data to an interface (port). An adapter defines the logic of writing to a data store, which can be a database, a file system, or an object storage system such as Amazon S3, depending on the application&rsquo;s needs.</p><h3 id=high-level-architecture>High-level architecture<a hidden class=anchor aria-hidden=true href=#high-level-architecture>#</a></h3><p>The application or application component contains the core business logic. It receives commands or queries from the ports, and sends requests out through the ports to external actors, which are implemented through adapters, as illustrated in the following diagram.</p><p><img alt="Hexagonal architecture pattern" loading=lazy src=https://docs.aws.amazon.com/images/prescriptive-guidance/latest/cloud-design-patterns/images/hexagonal-1.png></p><h3 id=implementation-using-aws-services>Implementation using AWS services<a hidden class=anchor aria-hidden=true href=#implementation-using-aws-services>#</a></h3><p>AWS Lambda functions often contain both business logic and database integration code, which are tightly coupled to meet an objective. You can use the hexagonal architecture pattern to separate business logic from infrastructure code. This separation enables unit testing of the business logic without any dependencies on the database code, and improves the agility of the development process.</p><p>In the following architecture, a Lambda function implements the hexagonal architecture pattern. The Lambda function is initiated by the Amazon API Gateway REST API. The function implements business logic and writes data to DynamoDB tables.</p><p><img alt="Implementing the hexagonal architecture pattern on AWS" loading=lazy src=https://docs.aws.amazon.com/images/prescriptive-guidance/latest/cloud-design-patterns/images/hexagonal-2.png></p><h3 id=sample-code>Sample code<a hidden class=anchor aria-hidden=true href=#sample-code>#</a></h3><p>The sample code in this section shows how to implement the domain model by using Lambda, separate it from infrastructure code (such as the code to access DynamoDB), and implement unit testing for the function.</p><h4 id=domain-model>Domain model<a hidden class=anchor aria-hidden=true href=#domain-model>#</a></h4><p>The domain model class has no knowledge of external components or dependencies—it only implements the business logic. In the following example, the class <code>Recipient</code> is a domain model class that checks for overlaps in the reservation date.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Recipient</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>recipient_id</span><span class=p>:</span><span class=nb>str</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span><span class=nb>str</span><span class=p>,</span> <span class=n>first_name</span><span class=p>:</span><span class=nb>str</span><span class=p>,</span> <span class=n>last_name</span><span class=p>:</span><span class=nb>str</span><span class=p>,</span> <span class=n>age</span><span class=p>:</span><span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__recipient_id</span> <span class=o>=</span> <span class=n>recipient_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__email</span> <span class=o>=</span> <span class=n>email</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__first_name</span> <span class=o>=</span> <span class=n>first_name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__last_name</span> <span class=o>=</span> <span class=n>last_name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__age</span> <span class=o>=</span> <span class=n>age</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__slots</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>recipient_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>__recipient_id</span>
</span></span><span class=line><span class=cl>    <span class=c1>#.....     </span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>are_slots_same_date</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>slot</span><span class=p>:</span><span class=n>Slot</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>selfslot</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__slots</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>selfslot</span><span class=o>.</span><span class=n>reservation_date</span> <span class=o>==</span> <span class=n>slot</span><span class=o>.</span><span class=n>reservation_date</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>True</span>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>is_slot_counts_equal_or_over_two</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1>#.....</span>
</span></span></code></pre></div><h4 id=input-port>Input port<a hidden class=anchor aria-hidden=true href=#input-port>#</a></h4><p>The <code>RecipientInputPort</code> class connects to the recipient class and runs the domain logic.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>RecipientInputPort</span><span class=p>(</span><span class=n>IRecipientInputPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>recipient_output_port</span><span class=p>:</span> <span class=n>IRecipientOutputPort</span><span class=p>,</span> <span class=n>slot_output_port</span><span class=p>:</span> <span class=n>ISlotOutputPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__recipient_output_port</span> <span class=o>=</span> <span class=n>recipient_output_port</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__slot_output_port</span> <span class=o>=</span> <span class=n>slot_output_port</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>    make reservation: adapting domain model business logic
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>make_reservation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>recipient_id</span><span class=p>:</span><span class=nb>str</span><span class=p>,</span> <span class=n>slot_id</span><span class=p>:</span><span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Status</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>status</span> <span class=o>=</span> <span class=kc>None</span>        
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># ---------------------------------------------------</span>
</span></span><span class=line><span class=cl>        <span class=c1># get an instance from output port</span>
</span></span><span class=line><span class=cl>        <span class=c1># ---------------------------------------------------</span>
</span></span><span class=line><span class=cl>        <span class=n>recipient</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__recipient_output_port</span><span class=o>.</span><span class=n>get_recipient_by_id</span><span class=p>(</span><span class=n>recipient_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>slot</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__slot_output_port</span><span class=o>.</span><span class=n>get_slot_by_id</span><span class=p>(</span><span class=n>slot_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>recipient</span> <span class=o>==</span> <span class=kc>None</span> <span class=ow>or</span> <span class=n>slot</span> <span class=o>==</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Status</span><span class=p>(</span><span class=mi>400</span><span class=p>,</span> <span class=s2>&#34;Request instance is not found. Something wrong!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;recipient: </span><span class=si>{</span><span class=n>recipient</span><span class=o>.</span><span class=n>first_name</span><span class=si>}</span><span class=s2>, slot date: </span><span class=si>{</span><span class=n>slot</span><span class=o>.</span><span class=n>reservation_date</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># ---------------------------------------------------</span>
</span></span><span class=line><span class=cl>        <span class=c1># execute domain logic</span>
</span></span><span class=line><span class=cl>        <span class=c1># ---------------------------------------------------</span>
</span></span><span class=line><span class=cl>        <span class=n>ret</span> <span class=o>=</span> <span class=n>recipient</span><span class=o>.</span><span class=n>add_reserve_slot</span><span class=p>(</span><span class=n>slot</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># ---------------------------------------------------</span>
</span></span><span class=line><span class=cl>        <span class=c1># persistent an instance throgh output port</span>
</span></span><span class=line><span class=cl>        <span class=c1># ---------------------------------------------------</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>ret</span> <span class=o>==</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__recipient_output_port</span><span class=o>.</span><span class=n>add_reservation</span><span class=p>(</span><span class=n>recipient</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>ret</span> <span class=o>==</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span> <span class=o>=</span> <span class=n>Status</span><span class=p>(</span><span class=mi>200</span><span class=p>,</span> <span class=s2>&#34;The recipient&#39;s reservation is added.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span> <span class=o>=</span> <span class=n>Status</span><span class=p>(</span><span class=mi>200</span><span class=p>,</span> <span class=s2>&#34;The recipient&#39;s reservation is NOT added!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>status</span>
</span></span></code></pre></div><h4 id=dynamodb-adapter-class>DynamoDB adapter class<a hidden class=anchor aria-hidden=true href=#dynamodb-adapter-class>#</a></h4><p>The <code>DDBRecipientAdapter</code> class implements access to the DynamoDB tables.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>DDBRecipientAdapter</span><span class=p>(</span><span class=n>IRecipientAdapter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>ddb</span> <span class=o>=</span> <span class=n>boto3</span><span class=o>.</span><span class=n>resource</span><span class=p>(</span><span class=s1>&#39;dynamodb&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__table</span> <span class=o>=</span> <span class=n>ddb</span><span class=o>.</span><span class=n>Table</span><span class=p>(</span><span class=n>table_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>recipient_id</span><span class=p>:</span><span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Recipient</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__table</span><span class=o>.</span><span class=n>get_item</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>Key</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;pk&#39;</span><span class=p>:</span> <span class=n>pk_prefix</span> <span class=o>+</span> <span class=n>recipient_id</span><span class=p>})</span>
</span></span><span class=line><span class=cl>      　<span class=o>...</span> 
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>recipient</span><span class=p>:</span><span class=n>Recipient</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>item</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;pk&#34;</span><span class=p>:</span> <span class=n>pk_prefix</span> <span class=o>+</span> <span class=n>recipient</span><span class=o>.</span><span class=n>recipient_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;email&#34;</span><span class=p>:</span> <span class=n>recipient</span><span class=o>.</span><span class=n>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;first_name&#34;</span><span class=p>:</span> <span class=n>recipient</span><span class=o>.</span><span class=n>first_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;last_name&#34;</span><span class=p>:</span> <span class=n>recipient</span><span class=o>.</span><span class=n>last_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;age&#34;</span><span class=p>:</span> <span class=n>recipient</span><span class=o>.</span><span class=n>age</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;slots&#34;</span><span class=p>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=c1># ... </span>
</span></span></code></pre></div><p>The Lambda function <code>get_recipient_input_port</code> is a factory for instances of the <code>RecipientInputPort</code> class. It constructs instances of output port classes with related adapter instances.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_recipient_input_port</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>RecipientInputPort</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>RecipientOutputPort</span><span class=p>(</span><span class=n>DDBRecipientAdapter</span><span class=p>()),</span> 
</span></span><span class=line><span class=cl>        <span class=n>SlotOutputPort</span><span class=p>(</span><span class=n>DDBSlotAdapter</span><span class=p>()))</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>lambda_handler</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>body</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;body&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>recipient_id</span> <span class=o>=</span> <span class=n>body</span><span class=p>[</span><span class=s1>&#39;recipient_id&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>slot_id</span> <span class=o>=</span> <span class=n>body</span><span class=p>[</span><span class=s1>&#39;slot_id&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=c1># get an input port instance</span>
</span></span><span class=line><span class=cl>    <span class=n>recipient_input_port</span> <span class=o>=</span> <span class=n>get_recipient_input_port</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>status</span> <span class=o>=</span> <span class=n>recipient_input_port</span><span class=o>.</span><span class=n>make_reservation</span><span class=p>(</span><span class=n>recipient_id</span><span class=p>,</span> <span class=n>slot_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;statusCode&#34;</span><span class=p>:</span> <span class=n>status</span><span class=o>.</span><span class=n>status_code</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;body&#34;</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;message&#34;</span><span class=p>:</span> <span class=n>status</span><span class=o>.</span><span class=n>message</span>
</span></span><span class=line><span class=cl>        <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><h4 id=unit-testing>Unit testing<a hidden class=anchor aria-hidden=true href=#unit-testing>#</a></h4><p>You can test the business logic for domain model classes by injecting mock classes. The following example provides the unit test for the domain model <code>Recipent</code> class.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_add_slot_one</span><span class=p>(</span><span class=n>fixture_recipient</span><span class=p>,</span> <span class=n>fixture_slot</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>slot</span> <span class=o>=</span> <span class=n>fixture_slot</span>
</span></span><span class=line><span class=cl>    <span class=n>target</span> <span class=o>=</span> <span class=n>fixture_recipient</span>
</span></span><span class=line><span class=cl>    <span class=n>target</span><span class=o>.</span><span class=n>add_reserve_slot</span><span class=p>(</span><span class=n>slot</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>slot</span> <span class=o>!=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>target</span> <span class=o>!=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=mi>1</span> <span class=o>==</span> <span class=nb>len</span><span class=p>(</span><span class=n>target</span><span class=o>.</span><span class=n>slots</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>slot</span><span class=o>.</span><span class=n>slot_id</span> <span class=o>==</span> <span class=n>target</span><span class=o>.</span><span class=n>slots</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>slot_id</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>slot</span><span class=o>.</span><span class=n>reservation_date</span> <span class=o>==</span> <span class=n>target</span><span class=o>.</span><span class=n>slots</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>reservation_date</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>slot</span><span class=o>.</span><span class=n>location</span> <span class=o>==</span> <span class=n>target</span><span class=o>.</span><span class=n>slots</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>location</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=kc>False</span> <span class=o>==</span> <span class=n>target</span><span class=o>.</span><span class=n>slots</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>is_vacant</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_add_slot_two</span><span class=p>(</span><span class=n>fixture_recipient</span><span class=p>,</span> <span class=n>fixture_slot</span><span class=p>,</span> <span class=n>fixture_slot_2</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>#.....</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_cannot_append_slot_more_than_two</span><span class=p>(</span><span class=n>fixture_recipient</span><span class=p>,</span> <span class=n>fixture_slot</span><span class=p>,</span> <span class=n>fixture_slot_2</span><span class=p>,</span> <span class=n>fixture_slot_3</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>#.....</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_cannot_append_same_date_slot</span><span class=p>(</span><span class=n>fixture_recipient</span><span class=p>,</span> <span class=n>fixture_slot</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>#.....</span>
</span></span></code></pre></div><h4 id=github-repository>GitHub repository<a hidden class=anchor aria-hidden=true href=#github-repository>#</a></h4><p>For a complete implementation of the sample architecture for this pattern, see the GitHub repository at <a href=https://github.com/aws-samples/aws-lambda-domain-model-sample target=_blank rel="noopener noreferrer nofollow">https://github.com/aws-samples/aws-lambda-domain-model-sample</a>
.</p><h2 id=related-content>Related content<a hidden class=anchor aria-hidden=true href=#related-content>#</a></h2><ul><li><p><a href=https://alistair.cockburn.us/hexagonal-architecture/ target=_blank rel="noopener noreferrer nofollow">Hexagonal architecture</a>
, article by Alistair Cockburn</p></li><li><p><a href=https://aws.amazon.com/jp/blogs/news/developing-evolutionary-architecture-with-aws-lambda/ target=_blank rel="noopener noreferrer nofollow">Developing evolutionary architectures with AWS Lambda</a>
 (AWS blog post in Japanese)</p></li></ul></div><script src=https://giscus.app/client.js data-repo=joey5403/joey5403 data-repo-id=R_kgDOGVP_hg data-category=General data-category-id=DIC_kwDOGVP_hs4ChjR9 data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=dark data-lang=en crossorigin=anonymous async></script><footer class=post-footer><ul class=post-tags><li><a href=https://joeyzheng.tech/tags/architect/>Architect</a></li></ul><nav class=paginav><a class=prev href=https://joeyzheng.tech/posts/feature-management-05/><span class=title>« Prev</span><br><span>Empower - The fourth pillar</span>
</a><a class=next href=https://joeyzheng.tech/posts/improving-flag-usage-in-code/><span class=title>Next »</span><br><span>Improving flag usage in code</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Hexagonal architecture pattern on x" href="https://x.com/intent/tweet/?text=Hexagonal%20architecture%20pattern&amp;url=https%3a%2f%2fjoeyzheng.tech%2fposts%2fhexagonal-architecture-pattern%2f&amp;hashtags=architect"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hexagonal architecture pattern on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjoeyzheng.tech%2fposts%2fhexagonal-architecture-pattern%2f&amp;title=Hexagonal%20architecture%20pattern&amp;summary=Hexagonal%20architecture%20pattern&amp;source=https%3a%2f%2fjoeyzheng.tech%2fposts%2fhexagonal-architecture-pattern%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hexagonal architecture pattern on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjoeyzheng.tech%2fposts%2fhexagonal-architecture-pattern%2f&title=Hexagonal%20architecture%20pattern"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hexagonal architecture pattern on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjoeyzheng.tech%2fposts%2fhexagonal-architecture-pattern%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hexagonal architecture pattern on whatsapp" href="https://api.whatsapp.com/send?text=Hexagonal%20architecture%20pattern%20-%20https%3a%2f%2fjoeyzheng.tech%2fposts%2fhexagonal-architecture-pattern%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hexagonal architecture pattern on telegram" href="https://telegram.me/share/url?text=Hexagonal%20architecture%20pattern&amp;url=https%3a%2f%2fjoeyzheng.tech%2fposts%2fhexagonal-architecture-pattern%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Hexagonal architecture pattern on ycombinator" href="https://news.ycombinator.com/submitlink?t=Hexagonal%20architecture%20pattern&u=https%3a%2f%2fjoeyzheng.tech%2fposts%2fhexagonal-architecture-pattern%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://joeyzheng.tech/>黄庄以北</a></span> ·
<span><img src="https://count.getloli.com/@joey5403.blog?name=joey5403.blog&theme=sketch-2&padding=7&offset=0&align=top&scale=1&pixelated=1&darkmode=auto">
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><br></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></body></html>